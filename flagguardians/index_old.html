<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Flag Guardians</title>
    <link rel="stylesheet" href="css/style.css?v=20260111">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Socket.IO Client -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <div class="logo">
                <h1>FLAG</h1>
                <h2>GUARDIANS</h2>
            </div>
            <div class="tagline">Defend Your Territory. Capture the Opposition.</div>
            <div class="button-group">
                <button id="btn-create-game" class="btn btn-primary">Create Game</button>
                <button id="btn-join-game" class="btn btn-secondary">Join Game</button>
            </div>
            <button id="btn-how-to-play" class="btn-link">How to Play</button>
        </div>

        <!-- How to Play Screen -->
        <div id="how-to-play-screen" class="screen">
            <button class="btn-back" id="btn-back-how-to-play">&larr; Back</button>
            <div class="how-to-play-content">
                <h2>How to Play</h2>
                
                <section class="htp-section">
                    <h3>ğŸ¯ Objective</h3>
                    <p>Flag Guardians is a team-based territorial control game where two teams compete to capture and defend flags. Capture enemy flags and protect your own to secure victory!</p>
                </section>

                <section class="htp-section">
                    <h3>ğŸ‘¥ Teams</h3>
                    <p>Players are divided into two teams:
                    <ul>
                        <li><strong>ğŸ”´ Red Team</strong> - Defend the red flag and capture the blue flag</li>
                        <li><strong>ğŸ”µ Blue Team</strong> - Defend the blue flag and capture the red flag</li>
                    </ul>
                    </p>
                </section>

                <section class="htp-section">
                    <h3>ğŸ® Game Rules</h3>
                    <ul>
                        <li>Minimum 2 players required to start (1v1)</li>
                        <li>Players can join either team</li>
                        <li>Capture enemy flag to score points</li>
                        <li>First team to reach victory conditions wins</li>
                        <li>Games last multiple rounds - improve your strategy!</li>
                    </ul>
                </section>

                <section class="htp-section">
                    <h3>âš”ï¸ Game Flow</h3>
                    <p><strong>Ready Phase:</strong> Players join teams and prepare for battle</p>
                    <p><strong>Active Round:</strong> Teams compete to capture flags and score</p>
                    <p><strong>Results:</strong> View team performance and final winner</p>
                </section>
            </div>
        </div>

        <!-- Create Game Screen -->
        <div id="create-game-screen" class="screen">
            <button class="btn-back" id="btn-back-create">&larr; Back</button>
            <div class="screen-content">
                <h2>Create Game</h2>
                <p class="subtitle">Enter your name to start a new game</p>
                <div class="form-group">
                    <input type="text" id="input-player-name" placeholder="Enter your name" maxlength="20">
                </div>
                <button id="btn-start-create-game" class="btn btn-primary">Create Game</button>
                <p class="message" id="create-game-message"></p>
            </div>
        </div>

        <!-- Join Game Screen -->
        <div id="join-game-screen" class="screen">
            <button class="btn-back" id="btn-back-join">&larr; Back</button>
            <div class="screen-content">
                <h2>Join Game</h2>
                <p class="subtitle">Enter game code and your name</p>
                <div class="form-group">
                    <input type="text" id="input-game-code" placeholder="Game Code (4 characters)" maxlength="4" style="text-transform: uppercase;">
                </div>
                <div class="form-group">
                    <input type="text" id="input-join-player-name" placeholder="Enter your name" maxlength="20">
                </div>
                <button id="btn-start-join-game" class="btn btn-primary">Join Game</button>
                <p class="message" id="join-game-message"></p>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby-screen" class="screen">
            <div class="lobby-header">
                <h2>Game Lobby</h2>
                <div class="game-code">Code: <span id="lobby-game-code">------</span></div>
            </div>

            <div class="player-info">
                <p>Your Name: <strong id="lobby-player-name">---</strong></p>
                <p class="host-badge" id="host-badge" style="display: none;">ğŸ‘‘ You are the Host</p>
            </div>

            <div class="teams-container">
                <!-- Red Team -->
                <div class="team-section red-team">
                    <h3>ğŸ”´ Red Team</h3>
                    <div class="team-list" id="red-team-list">
                        <p class="empty">Waiting for players...</p>
                    </div>
                    <button id="btn-join-red" class="btn btn-team-red">Join Red Team</button>
                </div>

                <!-- Blue Team -->
                <div class="team-section blue-team">
                    <h3>ğŸ”µ Blue Team</h3>
                    <div class="team-list" id="blue-team-list">
                        <p class="empty">Waiting for players...</p>
                    </div>
                    <button id="btn-join-blue" class="btn btn-team-blue">Join Blue Team</button>
                </div>
            </div>

            <div class="player-count">
                <p id="player-count-display">Players: 0/8</p>
            </div>

            <div class="lobby-controls">
                <button id="btn-start-game" class="btn btn-primary" disabled>Start Game (Minimum 2 players)</button>
                <button id="btn-leave-game" class="btn btn-secondary">Leave Game</button>
            </div>

            <p class="message" id="lobby-message"></p>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="team-info red">
                    <span id="red-team-name">Red</span>: <span id="red-score">0</span>
                </div>
                <div class="round-info">
                    Round <span id="current-round">1</span>
                </div>
                <div class="team-info blue">
                    <span id="blue-team-name">Blue</span>: <span id="blue-score">0</span>
                </div>
            </div>

            <div class="game-content">
                <!-- Map Grid Container (injected by JavaScript) -->
                
                <div class="my-team-section">
                    <h3>Your Team (<span id="my-team-display">---</span>)</h3>
                    <div class="players-list" id="my-team-players">
                        <p>Loading...</p>
                    </div>
                </div>

                <div class="game-actions">
                    <div class="flag-status">
                        <div class="flag-item">
                            <span class="flag-emoji">ğŸš©</span>
                            <p>Your Flag: <span id="flag-status">Secure</span></p>
                        </div>
                        <div class="flag-item">
                            <span class="flag-emoji">âš”ï¸</span>
                            <p>Enemy Flag: <span id="enemy-flag-status">Defending</span></p>
                        </div>
                    </div>
                </div>

                <div class="game-messages">
                    <h4>Game Updates</h4>
                    <div id="game-log" class="game-log">
                        <p class="message-info">Game started!</p>
                    </div>
                </div>
            </div>

            <div class="game-footer">
                <button id="btn-leave-mid-game" class="btn btn-secondary">Leave Game</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
            <div class="results-container">
                <h2 id="results-title">Game Over!</h2>
                <div class="winner-display" id="winner-display">
                    <!-- Filled by JavaScript -->
                </div>
                
                <div class="final-scores">
                    <h3>Final Scores</h3>
                    <div class="score-row">
                        <span class="team-red">ğŸ”´ Red Team</span>
                        <span id="results-red-score">0</span>
                    </div>
                    <div class="score-row">
                        <span class="team-blue">ğŸ”µ Blue Team</span>
                        <span id="results-blue-score">0</span>
                    </div>
                </div>

                <div class="team-results">
                    <h3>Team Results</h3>
                    <div class="team-result-section">
                        <h4>ğŸ”´ Red Team</h4>
                        <div id="results-red-team" class="team-result-list">
                            <!-- Filled by JavaScript -->
                        </div>
                    </div>
                    <div class="team-result-section">
                        <h4>ğŸ”µ Blue Team</h4>
                        <div id="results-blue-team" class="team-result-list">
                            <!-- Filled by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="results-controls">
                    <button id="btn-play-again" class="btn btn-primary">Play Again</button>
                    <button id="btn-back-home" class="btn btn-secondary">Back to Home</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/game.js"></script>
</body>
</html>
